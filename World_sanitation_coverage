import pandas as pd
import plotly.express as px

# Load your CSV
df = pd.read_csv("Project and Reoprts - World sanitation data.csv")

# Clean numeric values
def clean_numeric(val):
    if isinstance(val, str):
        val = val.replace('<', '').replace('>', '').replace('-', '0').strip()
    try:
        return float(val)
    except:
        return None

for col in ['Pit latrine', 'Septic tanks', 'Sewer connections']:
    df[col] = df[col].apply(clean_numeric)

# Create OSS = Pit latrine + Septic tanks
df['OSS'] = df['Pit latrine'] + df['Septic tanks']

# OSS map
fig_oss = px.choropleth(
    df,
    locations="ISO3",
    color="OSS",
    hover_name="Country",
    color_continuous_scale="YlOrRd",
    title="OSS Coverage (%) â€” Pit latrine + Septic tank",
    range_color=(0, 100)
)
fig_oss.show()

# Sewer map
fig_sewer = px.choropleth(
    df,
    locations="ISO3",
    color="Sewer connections",
    hover_name="Country",
    color_continuous_scale="PuBu",
    title="Sewer Connections Coverage (%)",
    range_color=(0, 100)
)
fig_sewer.show()
